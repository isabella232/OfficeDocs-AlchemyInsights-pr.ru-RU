---
title: Поиск и устранение неполадок в протоколах OAuth 2.0 и OpenID Connect
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 03/17/2021
audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "9776"
- "9004342"
ms.openlocfilehash: 7584d8f6f2e24812c1fdded76332edc6dd671034011e262c15756567cb467c26
ms.sourcegitcommit: b5f7da89a650d2915dc652449623c78be6247175
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "53921056"
---
# <a name="troubleshoot-oauth-20-and-openid-connect-protocols"></a>Поиск и устранение неполадок в протоколах OAuth 2.0 и OpenID Connect

Чтобы устранить проблемы с OAuth 2.0 и OpenID Connect, выполните следующие действия.

Обратитесь к следующим статьям, в которых описана конфигурация и устранение неполадок протоколов OAuth 2.0 и OpenID Connect:

- [Платформа удостоверений Майкрософт и поток операций в коде авторизации OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) - описание того, как программировать непосредственно поверх **потока операций предоставления полномочий (PKCE)** в вашем приложении на любом языке.
- [Платформа удостоверений Майкрософт и поток операций проверки удостоверения клиента OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) - описание того, как программировать непосредственно поверх **потока операций проверки идентичности клиента** в вашем приложении.
- [Платформа удостоверений Майкрософт и учетные данные с паролем владельца ресурса OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) - описание того, как программировать непосредственно поверх **потока операций проверки учетных данных владельца ресурса (ROPC)** в вашем приложении.
    - Платформа удостоверений Майкрософт поддерживает проверку учетных данных владельца ресурса только для клиентов Azure AD, но не для личных учетных записей. Это означает, что необходимо использовать конечную точку определенного клиента **(https://login.microsoftonline.com/{TenantId_or_Name})** или **конечную точку организации**.
    - Личные учетные записи, приглашенные в клиент Azure AD, не могут использовать ROPC.
    - Учетные записи без паролей не могут войти в систему с помощью ROPC. В этом случае рекомендуется взамен использовать для приложения другой поток операций.
    - Если пользователям необходимо использовать [многофакторную проверку подлинности (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) для входа в приложение, они будут заблокированы.
    - ROPC не поддерживается в [гибридной федерации удостоверений](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) (например, Azure AD и ADFS, используемые для проверки подлинности локальной учетной записи). Если пользователи перенаправляются на полную страницу локальному поставщику удостоверений, Azure AD не сможет проверить имя пользователя и пароль для этого поставщика удостоверений. [Однако сквозная проверка подлинности](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) поддерживается в ROPC.
    - Исключением из сценария гибридной федерации удостоверений может быть следующее: политика обнаружения домашней области с параметром **AllowCloudPasswordValidation**, установленным в значение **TRUE**, позволит потоку операций ROPC работать для федерационных пользователей при синхронизации локального пароля с облаком. Дополнительные сведения см. в статье [Включение прямой проверки подлинности ROPC для федерационных пользователей устаревших приложений](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications). 
- [Платформа удостоверений Майкрософт и поток операций OAuth 2.0 "от имени" (OBO)](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) - описание того, как программировать непосредственно поверх **потока операций проверки учетных данных "от имени" (OBO)** в вашем приложении.
- [Платформа удостоверений Майкрософт и протокол OpenID Connect](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) - описание, как реализовать протокол OpenID Connect независимо от языка и как отправлять и получать сообщения HTTP без использования библиотек Майкрософт с открытым кодом.

**Маркеры доступа**

Узнайте, как через API-интерфейс проверять и использовать утверждения в маркере доступа, см. статью [Маркеры доступа платформы удостоверений Майкрософт](https://docs.microsoft.com/azure/active-directory/develop/access-tokens). Вся документация в этой статье, если не указано иное, относится только к маркерам, выпущенным для зарегистрированных вами API. Она не относится к маркерам, выпущенным для API, принадлежащих Microsoft, и эти маркеры нельзя использовать для проверки того, как платформа удостоверений Майкрософт будет выдавать маркеры для создаваемых вами API.

**Конфигурация приложений**

[Ограничения и лимиты URI перенаправления (URL-адреса ответа)](https://docs.microsoft.com/azure/active-directory/develop/reply-url). Узнайте, как настроить URI перенаправления (URL-адрес ответа). URI перенаправления или URL-адрес ответа — это расположение, куда сервер авторизации отправляет пользователя после успешной авторизации приложения и предоставления кода авторизации или маркера доступа. Сервер авторизации отправляет код или маркер в URI перенаправления; поэтому важно зарегистрировать правильное расположение в процессе регистрации приложения.

**Подготовка приложений**

В пособии [Разработка и планирование подготовки для конечной точки SCIM](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) описывается, как создать конечную точку SCIM и интегрировать ее со службой подготовки Azure AD.


