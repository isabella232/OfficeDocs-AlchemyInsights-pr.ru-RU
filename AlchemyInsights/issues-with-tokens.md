---
title: Проблемы с маркерами
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 01/15/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "7774"
- "9004351"
ms.openlocfilehash: a4e99f1f80df601ddf53498d9a8323790fc52a50b2e067f17429da0bf6a03c43
ms.sourcegitcommit: b5f7da89a650d2915dc652449623c78be6247175
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "54067457"
---
# <a name="issues-with-tokens"></a>Проблемы с маркерами

Чтобы устранить проблемы, связанные с маркерами, выполните действия ниже.

1. Вы можете указать жизненный цикл маркера доступа, идентификатора или SAML, выданного платформой удостоверений Майкрософт. Жизненный цикл маркера можно задать для всех приложений в вашей организации, мультитенантного приложения (охватывающего несколько организаций) или отдельного субъекта-службы в вашей организации. Дополнительные сведения, см. в статье [Настраиваемые жизненные циклы маркеров на платформе удостоверений Майкрософт (предварительная версия)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).
2. Маркеры доступа позволяют клиентам безопасно вызывать защищенные веб-интерфейсы API и используются веб-интерфейсами API для проверки подлинности и авторизации. Как и спецификация OAuth, маркеры доступа — это непрозрачные строки без заданного формата. Некоторые поставщики удостоверений (IDP) используют идентификаторы GUID, другие используют зашифрованные объекты. В зависимости от конфигурации API, принимающей маркер, платформа удостоверений Майкрософт использует различные форматы маркеров доступа. Сведения о проверке и использовании утверждений в маркере доступа API-интерфейсом, см. в статье [Маркеры доступа платформы удостоверений Майкрософт](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint).
3. Библиотека проверки подлинности Майкрософт (MSAL) поддерживает несколько потоков проверки подлинности для использования в различных сценариях приложений. Подробнее: [Потоки проверки подлинности](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes)
4. Предоставление кода авторизации OAuth 2.0 можно использовать в приложениях, установленных на устройстве, для получения доступа к защищенным ресурсам, таким как веб-API. В рамках внедрения OAuth 2.0 в платформу удостоверений Майкрософт можно добавить доступ ко входу и API-интерфейсам в мобильные и классические приложения. См. статью [Платформа удостоверений Майкрософт и поток кода авторизации OAuth 2.0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token), чтобы узнать, как программировать непосредственно по протоколу в вашем приложении, используя любой язык.
5. OpenID Connect (OIDC) — протокол проверки подлинности, созданный на основе OAuth 2.0, который можно использовать для безопасного входа пользователя в приложение. В рамках внедрения OpenID Connect в конечные точки платформы удостоверений Майкрософт можно добавить доступ ко входу и API-интерфейсам в приложения. Статья [Платформа удостоверений Майкрософт и протокол OpenID Connect](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) показывает, как сделать это независимо от языка и описывает, как отправлять и получать сообщения HTTP без использования открытых библиотек Майкрософт.
    - Конечная точка UserInfo — это часть стандарта OIDC, предназначенная для возврата утверждений о пользователе, который прошел проверку подлинности. Дополнительные сведения см. в статье [Конечная точка UserInfo платформы удостоверений Майкрософт](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).
    - В примере [Вызов веб-API в веб-приложении с помощью Azure AD и OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) показано, как создать веб-приложение MVC, которое использует Azure AD для входа по протоколу OpenID Connect, а затем вызывает веб-API от имени вошедшего пользователя, используя маркеры, полученные по протоколу OAuth 2.0. В этом примере используется ПО промежуточного слоя OpenID Connect ASP .Net OWIN и ADAL .Net.
6. [Настройка приложения для предоставления веб-API](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis). В этом кратком руководстве веб-API регистрируется на платформе удостоверений Майкрософт и предоставляется клиентским приложениям с помощью добавления примера области. Регистрируя веб-API и предоставляя доступ к нему с помощью областей, вы предоставляете доступ на основе разрешения к своим ресурсам авторизованным пользователям и клиентским приложениям, которые обращаются к вашему API.
7. В Azure Active Directory B2C (Azure AD B2C) в качестве учетных данных пароля владельца ресурса (ROPC) используется стандартный поток проверки подлинности OAuth. В этом потоке приложение, известное как проверяющая сторона, обменивает действительные учетные данные на маркеры. Учетные данные включают идентификатор пользователя и пароль. Возвращаемые маркеры — это маркер идентификатора, маркер доступа и маркер обновления. Дополнительные сведения см. в статье [Настройка потока учетных данных пароля владельца ресурса в службе Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow). 

